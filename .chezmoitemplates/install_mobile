# Set APT defaults
APT="apt --quiet --assume-yes --no-install-recommends"

# Change Mirrors
pkg install termux-tools
ln -s "$PREFIX/etc/termux/mirrors/europe" "$PREFIX/etc/termux/chosen_mirrors"
pkg --check-mirror update

# Upgrade system
$APT upgrade

# Install packages
$APT install age cloudflared curl dnsutils git gzip inetutils \
    lsd mosh net-tools openssh rsync tmux neovim zsh

# Cleanup
$APT autoremove
$APT autoclean

# Copy Nerd Font
cp "$HOME/.fonts/MesloLGS NF Regular.ttf" "$HOME/.termux/font.ttf"

# Change Shell
chsh -s zsh

# Generate SSH key
[ ! -f "$HOME/.ssh/id_ed25519" ] && ssh-keygen -q -t ed25519 -f "$HOME/.ssh/id_ed25519" -N ""

# Enable storage
[ ! -d "$HOME/storage" ] && termux-setup-storage

exit 0
