# vim: syntax=sh

# Do not install recommended packages
run0 sed -i 's/^#\?Recommends=.*/Recommends=false/' /etc/rpm-ostreed.conf

# Add Brave Repository
run0 curl --tlsv1.3 -fsSLo /etc/yum.repos.d/brave-browser.repo \
    https://brave-browser-rpm-release.s3.brave.com/brave-browser.repo

# Install Packages
rpm-ostree update --install \
    brave-browser \
    neovim \
    wayvnc \
    wireguard-tools \
    zsh

# Disable System Services
systemctl disable \
    cups.service cups.socket cups.path \
    ModemManager.service \
    sddm.service

# TODO: Find a way to cleanly disable the following services
# blueman-mechanism.service
# bluetooth.service
# geoclue.service
# mpris-proxy.service
# obex.service

# Update GRUB timeout
echo "set timeout=0" | run0 tee /boot/grub2/user.cfg

# Reboot
exit 0 #systemctl reboot

# Change Shell to ZSH
chsh --shell=/usr/bin/zsh

# Add Flathub
flatpak remote-add --user --if-not-exists \
    flathub https://dl.flathub.org/repo/flathub.flatpakrepo

# Install Flatpaks
flatpak install --user --assumeyes \
    com.github.tchx84.Flatseal \
    org.keepassxc.KeePassXC \
    org.libreoffice.LibreOffice \
    org.qbittorrent.qBittorrent \
    com.visualstudio.code

